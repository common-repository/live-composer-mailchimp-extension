jQuery(document).ready(function() {
	jQuery('.lc-mailchimp-form').on('submit',function(e) {
		e.preventDefault();
		var validate = true;
		var form = jQuery(this);
		form.find('.mailchimp-input').each(function() {
			if (jQuery(this).val() == '') {
				jQuery(this).addClass('required');
				validate = false;
			}
		});
		if (validate) {
			form.find('.result').html('<img src="'+loadingImg+'" style="display:block;margin:0 auto"/>');
			jQuery.ajax({
				type: 'POST',
				data: {
					action: 'lc_mailchimp',
					value: form.serialize()
				},
				url: jakiez.url,
				success: function(data) {
					form.find('.result img').hide();
					var result = jQuery.parseJSON(data);
					if(result.code == "200") {
						form.find('input').prop("disabled",true);
						form.find(".result").html("<p class=\"success\">"+result.success+"</p>");
					} else {
						form.find('.result').html("<p class=\"error\">"+result.error+"</p>");
					}
				}
			});
		}
	});
	jQuery('input').on('click',function() {
		if (jQuery(this).hasClass('required')) {
			jQuery(this).removeClass('required');
		}
	});
});